{"ast":null,"code":"import { inject } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { catchError, of } from 'rxjs';\nimport { map } from 'rxjs/operators';\nimport { ApiService } from './api.service';\nexport const AuthGuard = (route, state) => {\n  const LoginService = inject(ApiService);\n  const router = inject(Router);\n  return LoginService.isAuthenticatedUser().pipe(map(loggedIn => loggedIn ? true : router.createUrlTree([router.parseUrl('/admin')], {\n    queryParams: {\n      loggedOut: true,\n      origUrl: state.url\n    }\n  })), catchError(err => {\n    router.navigate(['/admin'], {\n      queryParams: {\n        loggedOut: true,\n        origUrl: state.url\n      }\n    });\n    return of(false);\n  }));\n};","map":{"version":3,"names":["inject","Router","catchError","of","map","ApiService","AuthGuard","route","state","LoginService","router","isAuthenticatedUser","pipe","loggedIn","createUrlTree","parseUrl","queryParams","loggedOut","origUrl","url","err","navigate"],"sources":["C:\\Users\\Radoslav\\Desktop\\projects\\dzive-labute-v2\\dzive-labute-web\\ngApp\\src\\app\\auth.guard.ts"],"sourcesContent":["import {inject} from '@angular/core';\nimport {\n  ActivatedRouteSnapshot,\n  RouterStateSnapshot,\n  Router,\n  CanActivateFn, ActivatedRoute, mapToCanActivate\n} from '@angular/router';\nimport {catchError, of} from 'rxjs';\nimport { map } from 'rxjs/operators';\nimport { ApiService } from './api.service';\n\nexport const AuthGuard: CanActivateFn = (route: ActivatedRouteSnapshot, state: RouterStateSnapshot) => {\n  const LoginService = inject(ApiService);\n  const router = inject(Router);\n\n  return LoginService.isAuthenticatedUser().pipe(\n    map(loggedIn => loggedIn ? true : router.createUrlTree([router.parseUrl('/admin')], {\n      queryParams: { loggedOut: true, origUrl: state.url }\n    } )),\n    catchError((err) => {\n      router.navigate(['/admin'], {\n        queryParams: { loggedOut: true, origUrl: state.url }\n      });\n      return of(false);\n    })\n  )\n}"],"mappings":"AAAA,SAAQA,MAAM,QAAO,eAAe;AACpC,SAGEC,MAAM,QAED,iBAAiB;AACxB,SAAQC,UAAU,EAAEC,EAAE,QAAO,MAAM;AACnC,SAASC,GAAG,QAAQ,gBAAgB;AACpC,SAASC,UAAU,QAAQ,eAAe;AAE1C,OAAO,MAAMC,SAAS,GAAkBA,CAACC,KAA6B,EAAEC,KAA0B,KAAI;EACpG,MAAMC,YAAY,GAAGT,MAAM,CAACK,UAAU,CAAC;EACvC,MAAMK,MAAM,GAAGV,MAAM,CAACC,MAAM,CAAC;EAE7B,OAAOQ,YAAY,CAACE,mBAAmB,EAAE,CAACC,IAAI,CAC5CR,GAAG,CAACS,QAAQ,IAAIA,QAAQ,GAAG,IAAI,GAAGH,MAAM,CAACI,aAAa,CAAC,CAACJ,MAAM,CAACK,QAAQ,CAAC,QAAQ,CAAC,CAAC,EAAE;IAClFC,WAAW,EAAE;MAAEC,SAAS,EAAE,IAAI;MAAEC,OAAO,EAAEV,KAAK,CAACW;IAAG;GACnD,CAAE,CAAC,EACJjB,UAAU,CAAEkB,GAAG,IAAI;IACjBV,MAAM,CAACW,QAAQ,CAAC,CAAC,QAAQ,CAAC,EAAE;MAC1BL,WAAW,EAAE;QAAEC,SAAS,EAAE,IAAI;QAAEC,OAAO,EAAEV,KAAK,CAACW;MAAG;KACnD,CAAC;IACF,OAAOhB,EAAE,CAAC,KAAK,CAAC;EAClB,CAAC,CAAC,CACH;AACH,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}